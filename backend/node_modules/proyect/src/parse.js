function strCamelCase(str) {
    return str
        .replace(/\-\-/g, "")
        .replace(/\-([\w])/g, (glob, letter) => letter.toUpperCase());
}

function parse(args) {
    let run = args.shift(),
        params = {},
        local = /.js$/.test(run),
        last;

    args.forEach(value => {
        if (value.indexOf("--") == 0) {
            params[(last = strCamelCase(value))] = undefined;
        } else {
            params[last] = params[last]
                ? (Array.isArray(params[last])
                      ? params[last]
                      : [params[last]]
                  ).concat(value)
                : value;
        }
    });

    return {
        run,
        local,
        params
    };
}

module.exports = parse;
